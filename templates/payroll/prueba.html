{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Formulario con Unpoly</title>
    <script src="https://cdn.jsdelivr.net/npm/unpoly@3.10.2/unpoly.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/unpoly@3.10.2/unpoly.min.css">

    <script src="{% static 'application.js' %}"></script>
</head>
<body>
    <form>
        <label for="option">Opción:</label>
        <select name="option" id="option">
            <option value="opcion1">Opción 1</option>
            <option value="opcion2">Opción 2</option>
        </select>

        <label for="number">Número (máx 2 cifras):</label>
        <input type="number" name="number" id="number" up-change="validateNumber()"/>

        <label for="text">Resultado:</label>
        <input type="text" name="text" id="text" readonly/>
    </form>

    <script>
        function validateNumber() {
            const numberInput = document.getElementById('number');
            const textInput = document.getElementById('text');

            up.request('{% url "payroll:validate_number" %}', {
                method: 'GET',
                params: { number: numberInput.value }
            }).then(function(response) {
                textInput.value = response.json.message;
            }).catch(function(error) {
                textInput.value = 'Error en la validación';
            });
        }
    </script>
</body>
</html>
